<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CesiumJS Dynamic Earth Example</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.67/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.67/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
    <div id="cesiumContainer" style="width: 100%; height: 100%;"></div>
    <script>
        Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';

        var viewer = new Cesium.Viewer('cesiumContainer', {
            terrainProvider: Cesium.createWorldTerrain(),
            shouldAnimate: true,
        });

        // Start off looking at Australia.
        viewer.camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(133.7751, -25.2744, 10000000)
        });

        // Enable the home button to return to Australia view.
        viewer.homeButton.viewModel.command.beforeExecute.addEventListener(function (e) {
            e.cancel = true;
            viewer.camera.flyTo({
                destination: Cesium.Cartesian3.fromDegrees(133.7751, -25.2744, 10000000)
            });
        });

        // Define your CZML data here
        // var czmlData = [
        //     // ... Your CZML objects ...
        // ];

        // // Process the CZML data
        // var czmlDataSource = new Cesium.CzmlDataSource();
        // czmlDataSource.process(czmlData);
        // viewer.dataSources.add(czmlDataSource);

        var czmlDataSource = new Cesium.CzmlDataSource();
        czmlDataSource.load('orbit.czml');
        viewer.dataSources.add(czmlDataSource);


//-----------------------------------------------------------
    //     const button = document.createElement('button');
    // button.textContent = 'Click me';
    // button.addEventListener('click', () => {
    //   // Perform actions on button click
    //   alert('Button clicked!');
    // });
    // document.body.appendChild(button);



     // Create Cesium viewer
     //const viewer = new Cesium.Viewer('cesiumContainer');

//Define a sample entity with a position and some properties
const clickableEntity = viewer.entities.add({
    position: Cesium.Cartesian3.fromDegrees(-75.1641667, 39.9522222),
    label: {
        text: 'Click me!',
        show: true,
        font: '14px sans-serif',
        style: Cesium.LabelStyle.FILL_AND_OUTLINE,
        fillColor: Cesium.Color.YELLOW,
        outlineColor: Cesium.Color.BLACK,
        outlineWidth: 2,
        pixelOffset: new Cesium.Cartesian2(0, -30), // Adjust the label position
    },
});

// Add a click event listener to the entity
clickableEntity.description = 'This is a clickable entity.';
// clickableEntity.click = function (movement) {
//     console.log('Entity clicked!', clickableEntity.description);
// };

// viewer.screenSpaceEventHandler.setInputAction(function (movement) {
//     var pickedObject = viewer.scene.pick(movement.endPosition);
//     if (Cesium.defined(pickedObject) && pickedObject.id === clickableEntity) {
//         console.log('Entity clicked!', clickableEntity.description);
//     }
// }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

viewer.screenSpaceEventHandler.setInputAction(function (movement) {
    try {
        // Use movement.position instead of movement.endPosition
        var pickedObject = viewer.scene.pick(movement.position);

        // Check if pickedObject is defined and has an 'id'
        if (Cesium.defined(pickedObject) && Cesium.defined(pickedObject.id) && pickedObject.id === clickableEntity) {
            console.log('Entity clicked!', clickableEntity.description);
        }
    } catch (error) {
        console.error('Error handling click event:', error);
    }
}, Cesium.ScreenSpaceEventType.LEFT_CLICK);






    </script>
</body>
</html>








<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CesiumJS Example</title>
    <script src="./node_modules/cesium/Build/Cesium/Cesium.js"></script>
</head>
<body>
    <div id="cesiumContainer"></div>
    <script>
        Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';

        // Your CesiumJS code goes here
    </script>
</body>
</html> -->


<!-- THE CODE BELOW DRAWS THE EARTH AND ALLOWS USERS TO ZOOM IN/OUT + MOVE AROUND -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CesiumJS Dynamic Earth Example</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.67/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.67/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
    <div id="cesiumContainer" style="width: 100%; height: 100%;"></div>
    <script>
        Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';

        var viewer = new Cesium.Viewer('cesiumContainer', {
            // Enable lighting based on sun position
            terrainProvider: Cesium.createWorldTerrain(),
            shouldAnimate: true, // Enable animations
        });

        // Start off looking at Australia.
        viewer.camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(133.7751, -25.2744, 10000000)
        });

        // Enable the home button to return to Australia view.
        viewer.homeButton.viewModel.command.beforeExecute.addEventListener(function (e) {
            e.cancel = true;
            viewer.camera.flyTo({
                destination: Cesium.Cartesian3.fromDegrees(133.7751, -25.2744, 10000000)
            });
        });

    </script>
</body>
</html>



-->



<!-- <!DOCTYPE html>
<html>
<head>
    <title>GPS BIIR-2 (PRN 13) Orbit</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        #cesiumContainer {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
        }
    </style>
</head>
<body>
<div id="cesiumContainer"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.1.3/satellite.min.js"></script>
<script>
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';

    const viewer = new Cesium.Viewer('cesiumContainer', {
        shouldAnimate: true
    });

    // TLE data for GPS BIIR-2 (PRN 13)
    const tle1 = '1 24876U 97035A   23335.84468286  .00000049  00000+0  00000+0 0  9994';
    const tle2 = '2 24876  55.6130 134.8857 0075345  53.6276 307.0533  2.00564853193331';

    // Initialize a satellite record
    const satrec = satellite.twoline2satrec(tle1, tle2);

    // Compute the satellite's position for 1 day, with a step of 10 minutes
    const positions = [];
    for (let i = 0; i < 1440; i += 10) {
        const date = new Date(new Date().getTime() + i * 60000);
        const positionAndVelocity = satellite.propagate(satrec, date);
        const positionEci = positionAndVelocity.position;
        const gmst = satellite.gstime(date);
        const positionGd = satellite.eciToGeodetic(positionEci, gmst);
        const position = Cesium.Cartesian3.fromRadians(
            positionGd.longitude,
            positionGd.latitude,
            positionGd.height * 1000
        );
        positions.push(position);
    }

    // Add the computed positions as a polyline to the viewer
    viewer.entities.add({
        polyline: {
            positions: positions,
            width: 2,
            material: Cesium.Color.RED
        }
    });

    // Adjust the viewer to see the whole trajectory
    viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883, 10000000)
    });
</script>
</body>
</html> -->


<!-- <!DOCTYPE html>
<html>
<head>
    <title>GPS BIIR-2 (PRN 13) Orbit Visualization</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        #cesiumContainer {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
        }
    </style>
</head>
<body>
<div id="cesiumContainer"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.1.3/satellite.min.js"></script>
<script>
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';

    const viewer = new Cesium.Viewer('cesiumContainer', {
        shouldAnimate: true
    });

    // TLE data for GPS BIIR-2 (PRN 13)
    const tle1 = '1 24876U 97035A   23335.84468286  .00000049  00000+0  00000+0 0  9994';
    const tle2 = '2 24876  55.6130 134.8857 0075345  53.6276 307.0533  2.00564853193331';

    const satrec = satellite.twoline2satrec(tle1, tle2);
    const orbitPositions = [];
    const start = new Date();
    const end = new Date(start.getTime() + 90 * 60 * 1000); // 90 minutes for one orbit period
    let time = start;
    
    while (time <= end) {
        const positionAndVelocity = satellite.propagate(satrec, time);
        if (positionAndVelocity.position) {
            const gmst = satellite.gstime(time);
            const positionGd = satellite.eciToGeodetic(positionAndVelocity.position, gmst);
            const position = Cesium.Cartesian3.fromRadians(
                positionGd.longitude,
                positionGd.latitude,
                positionGd.height * 1000
            );
            orbitPositions.push(position);
        }
        time = new Date(time.getTime() + 1000 * 10); // increment by 10 seconds
    }

    // Create the satellite orbit path
    const orbitPath = viewer.entities.add({
        polyline: {
            positions: orbitPositions,
            width: 2,
            material: Cesium.Color.RED
        }
    });

    // Create a moving satellite point
    const satellitePoint = viewer.entities.add({
        position: new Cesium.CallbackProperty(function(time) {
            const jsDate = Cesium.JulianDate.toDate(time);
            const positionAndVelocity = satellite.propagate(satrec, jsDate);
            if (positionAndVelocity.position) {
                const gmst = satellite.gstime(jsDate);
                const positionGd = satellite.eciToGeodetic(positionAndVelocity.position, gmst);
                return Cesium.Cartesian3.fromRadians(
                    positionGd.longitude,
                    positionGd.latitude,
                    positionGd.height * 1000
                );
            }
        }, false),
        point: {
            pixelSize: 5,
            color: Cesium.Color.WHITE
        }
    });

    // Set the viewer to track the satellite
    viewer.trackedEntity = satellitePoint;

    // Configure the clock to simulate time passing
    viewer.clock.startTime = Cesium.JulianDate.fromDate(start);
    viewer.clock.currentTime = Cesium.JulianDate.fromDate(start);
    viewer.clock.stopTime = Cesium.JulianDate.fromDate(end);
    viewer.clock.clockRange = Cesium.ClockRange.LOOP_STOP; // Loop at the end
    viewer.clock.multiplier = 100; // Speed up the animation

    // Fly to an appropriate distance
    viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883, 10000000)
    });
</script>
</body>
</html>

 -->









 <!-- <!DOCTYPE html>
 <html>
 <head>
     <title>GPS BIIR-2 (PRN 13) Orbit Visualization</title>
     <script src="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Cesium.js"></script>
     <link href="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
     <style>
         #cesiumContainer {
             width: 100%; height: 100%; position: absolute; top: 0; left: 0;
         }
     </style>
 </head>
 <body>
 <div id="cesiumContainer"></div>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.1.3/satellite.min.js"></script>
 <script>
     Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';
 
     const viewer = new Cesium.Viewer('cesiumContainer', {
         shouldAnimate: true
     });
 
     // TLE data for GPS BIIR-2 (PRN 13)
     const tle1 = '1 24876U 97035A   23335.84468286  .00000049  00000+0  00000+0 0  9994';
     const tle2 = '2 24876  55.6130 134.8857 0075345  53.6276 307.0533  2.00564853193331';
 
     const satrec = satellite.twoline2satrec(tle1, tle2);
     const orbitPositions = [];
     const start = new Date();
     const orbitalPeriod = 2 * Math.PI / satrec.no; // Orbital period in seconds
     const end = new Date(start.getTime() + orbitalPeriod * 1000); // Convert period to milliseconds
     let time = start;
     
     while (time <= end) {
         const positionAndVelocity = satellite.propagate(satrec, time);
         if (positionAndVelocity.position) {
             const gmst = satellite.gstime(time);
             const positionGd = satellite.eciToGeodetic(positionAndVelocity.position, gmst);
             const position = Cesium.Cartesian3.fromRadians(
                 positionGd.longitude,
                 positionGd.latitude,
                 positionGd.height * 1000
             );
             orbitPositions.push(position);
         }
         time = new Date(time.getTime() + 1000 * 10); // increment by 10 seconds
     }
 
     // Create the satellite orbit path (static full orbit)
     const orbitPath = viewer.entities.add({
         polyline: {
             positions: orbitPositions,
             width: 2,
             material: Cesium.Color.RED
         }
     });
 
     // Create a moving satellite point (dynamic real-time position)
     const satellitePoint = viewer.entities.add({
         position: new Cesium.CallbackProperty(function(time) {
             const jsDate = Cesium.JulianDate.toDate(time);
             const positionAndVelocity = satellite.propagate(satrec, jsDate);
             if (positionAndVelocity.position) {
                 const gmst = satellite.gstime(jsDate);
                 const positionGd = satellite.eciToGeodetic(positionAndVelocity.position, gmst);
                 return Cesium.Cartesian3.fromRadians(
                     positionGd.longitude,
                     positionGd.latitude,
                     positionGd.height * 1000
                 );
             }
         }, false),
         point: {
             pixelSize: 5,
             color: Cesium.Color.WHITE
         }
     });
 
     // Set the viewer to track the satellite
     viewer.trackedEntity = satellitePoint;
 
     // Configure the clock to simulate time passing
     viewer.clock.startTime = Cesium.JulianDate.fromDate(start);
     viewer.clock.currentTime = Cesium.JulianDate.fromDate(start);
     viewer.clock.stopTime = Cesium.JulianDate.fromDate(end);
     viewer.clock.clockRange = Cesium.ClockRange.LOOP_STOP; // Loop at the end
     viewer.clock.multiplier = 100; // Speed up the animation
 
     // Fly to an appropriate distance
     viewer.camera.flyTo({
         destination: Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883, 10000000)
     });
 </script>
 </body>
 </html>
 

 -->


  <!-- <!DOCTYPE html>
  <html>
  <head>
      <title>GPS BIIR-2 (PRN 13) Orbit</title>
      <script src="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Cesium.js"></script>
      <link href="https://cesium.com/downloads/cesiumjs/releases/1.88/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
      <style>
          #cesiumContainer {
              width: 100%; height: 100%; position: absolute; top: 0; left: 0;
          }
      </style>
  </head>
  <body>
  <div id="cesiumContainer"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.1.3/satellite.min.js"></script>
  <script>
      Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5YzFhYWRlOC0yMWE5LTQ5NmQtYTIzNS0zNjhjYjEwZWFiOWEiLCJpZCI6MTgxODk1LCJpYXQiOjE3MDE0MTAwMTd9.Ytc6dilxPmTS6wbeU7OW6vtiN5XPwvS3vAXJv7Dtpco';
  
      const viewer = new Cesium.Viewer('cesiumContainer', {
          shouldAnimate: true,
          animation: true,
          timeline: true
      });
  
      // TLE data for GPS BIIR-2 (PRN 13)
      const tle1 = '1 24876U 97035A   23335.84468286  .00000049  00000+0  00000+0 0  9994';
      const tle2 = '2 24876  55.6130 134.8857 0075345  53.6276 307.0533  2.00564853193331';
  
      // Initialize a satellite record
      const satrec = satellite.twoline2satrec(tle1, tle2);
  
      // Compute the satellite's position for 1 day, with a step of 10 minutes
      const positions = [];
      for (let i = 0; i < 1440; i += 10) {
          const date = new Date(new Date().getTime() + i * 60000);
          const positionAndVelocity = satellite.propagate(satrec, date);
          const positionEci = positionAndVelocity.position;
          const gmst = satellite.gstime(date);
          const positionGd = satellite.eciToGeodetic(positionEci, gmst);
          const position = Cesium.Cartesian3.fromRadians(
              positionGd.longitude,
              positionGd.latitude,
              positionGd.height * 1000
          );
          positions.push(position);
      }
  
      // Add the computed positions as a polyline to the viewer

      viewer.entities.add({
    polyline: {
        positions: positions,
        width: 2,
        material: Cesium.Color.RED
    }
});

// Add a real-time satellite point
viewer.entities.add({
    position: new Cesium.CallbackProperty(() => {
        const now = new Date();
        const positionAndVelocity = satellite.propagate(satrec, now);
        if (positionAndVelocity.position) {
            const gmst = satellite.gstime(now);
            const positionGd = satellite.eciToGeodetic(positionAndVelocity.position, gmst);
            return Cesium.Cartesian3.fromRadians(
                positionGd.longitude,
                positionGd.latitude,
                positionGd.height * 1000
            );
        }
        return null;
    }, false),
    point: {
        pixelSize: 5,
        color: Cesium.Color.YELLOW
    }
});

// Adjust the viewer to see the whole trajectory
viewer.camera.flyTo({
    destination: Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883, 10000000)
});
</script>
</body>
</html>
     
   -->